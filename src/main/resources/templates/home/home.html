<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VOIDR | 公式サイト</title>

  <link rel="stylesheet" href="/css/Homepage.css">
  <link rel="stylesheet" th:href="@{/css/hpHeader.css}">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
</head>

<body>

  <!-- ▼ モーダル -->
  <div id="storeModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <a href="https://www.ea.com/ja-jp/ea-app" class="store-btn ea">Windows用EA appでダウンロード</a>
      <a href="https://store.steampowered.com/" class="store-btn steam">Steamストアに進む</a>
      <a href="https://store.epicgames.com/" class="store-btn epic">Epic Gamesストアに進む</a>
      <a href="https://store.playstation.com/" class="store-btn ps4">PlayStation®4ストアに進む</a>
      <a href="https://store.playstation.com/" class="store-btn ps5">PlayStation®5ストアに進む</a>
      <a href="https://www.xbox.com/ja-JP/microsoft-store" class="store-btn xbox">Xboxストアに進む</a>
      <a href="https://www.nintendo.co.jp/software/" class="store-btn switch">Nintendo Switchストアに進む</a>
    </div>
  </div>

  <!-- ▼ ロード画面 -->
  <div id="loading-screen">
    <div class="logo-container">
      <img src="images/logo.png" alt="VOIDRロゴ" class="logo">
      <p class="roading-text">Loading...</p>
    </div>
    <canvas id="particle-canvas"></canvas>
  </div>

  <!-- ★ HP初回アクセスのみロード画面を表示する処理（sessionStorage版） -->
  <script>
    const loadingScreen = document.getElementById('loading-screen');
    const logo = document.querySelector('.logo');
    const roadingText = document.querySelector('.roading-text');

    const firstVisit = !sessionStorage.getItem('hp_visited');

    if (!firstVisit) {
      // 2回目以降（同タブ内）はロード画面なし
      loadingScreen.style.display = 'none';
    } else {
      // 初回アクセス
      sessionStorage.setItem('hp_visited', 'true');

      window.addEventListener('load', () => {
        setTimeout(() => {
          logo.style.opacity = '0';
          roadingText.style.opacity = '0';
        }, 1000);

        setTimeout(() => {
          loadingScreen.style.opacity = '0';
          setTimeout(() => {
            loadingScreen.style.display = 'none';
          }, 1000);
        }, 4000);
      });
    }
  </script>

  <!-- ▼ 背景粒子アニメーション（変更なし） -->
  <script>
    const canvas = document.getElementById('particle-canvas');
    const ctx = canvas.getContext('2d');

    function resizeCanvas(){
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    const particles = [];
    for(let i=0; i<150; i++){
      particles.push({
        x: Math.random()*canvas.width,
        y: Math.random()*canvas.height,
        r: Math.random()*2+1,
        dx: (Math.random()-0.5)*1.5,
        dy: (Math.random()-0.5)*1.5
      });
    }

    function animateParticles(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      particles.forEach(p => {
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
        ctx.fillStyle = 'rgba(255,255,255,0.7)';
        ctx.fill();
        p.x += p.dx;
        p.y += p.dy;

        if(p.x<0) p.x = canvas.width;
        if(p.x>canvas.width) p.x = 0;
        if(p.y<0) p.y = canvas.height;
        if(p.y>canvas.height) p.y = 0;
      });
      requestAnimationFrame(animateParticles);
    }
    animateParticles();
  </script>

  <!-- ▼ 共通ヘッダー -->
  <div th:replace="fragments/hpheader :: header"></div>

  <!-- ▼ 動画背景 -->
  <section class="hero">
    <video autoplay muted loop playsinline class="background-video">
      <source src="/videos/downloade.mp4" type="video/mp4">
    </video>

    <div class="hero-content">
      <h1 class="site-title">
        <div class="title-logo-container">
          <img src="images/title_logo.png" alt="VOIDR" class="title-logo">
        </div>
      </h1>

      <p>新たな戦いが、今ここに。</p>
      <a href="#" class="btn" id="openStoreModal">今すぐダウンロード</a>
    </div>
  </section>

  <!-- ▼ ゲーム紹介 -->
  <section class="game-overview">
    <div class="content">
      <div class="text">
        <h2>ゲーム紹介</h2>
        <p>
          『VOIDR（ヴォイダー）』は、ヴォイド・エッセンスによって崩壊した近未来を舞台にした4vs4の戦術FPS。<br>
          各プレイヤーは「ヴォイド・アバター」として異能を駆使し戦いに挑む。<br>
          戦術・心理・スキルが交錯する、新時代のチームバトル。
        </p>
      </div>
    </div>
  </section>

  <!-- ▼ キャラクター -->
  <section class="character-intro">
    <div class="content reverse">
      <div class="text">
        <h2>キャラクター</h2>
        <p>
          『VOIDR』の戦闘者は、感情や記憶を“異能”として発現する存在。<br>
          多彩なバックボーンと能力を持つアバターたちが戦場でぶつかり合う。
        </p>
        <div class="see-more-wrap">
          <a class="see-more" href="/voidr/character">
            もっと見る <span class="arrow">→</span>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- ▼ ニュース -->
  <section class="news-section">
    <div class="content">
      <div class="text">
        <h2>ニュース</h2>
        <p>最新情報・アップデート・イベント情報をお届けします。</p>
        <div class="see-more-wrap news-more">
          <a class="see-more" href="/voidr/news">
            もっと見る <span class="arrow">→</span>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- ▼ お問い合わせ / SNS -->
  <section class="contact-section">
    <div class="contact-content">
      <a href="/voidr/contact" class="contact-btn">お問い合わせ</a>

      <div class="social-links">
        <a href="https://twitter.com/elonmusk" target="_blank">
          <img src="images/twitter.png" alt="Twitter">
        </a>
        <a href="https://www.youtube.com/" target="_blank">
          <img src="images/youtube.png" alt="YouTube">
        </a>
        <a href="https://www.tiktok.com/" target="_blank">
          <img src="images/tiktok.png" alt="TikTok">
        </a>
      </div>
    </div>
  </section>

  <!-- ▼ フッター -->
  <footer>
    <p>© 2025 VOIDR All rights reserved.</p>
  </footer>

  <!-- ▼ モーダルJS・スクロールアニメ -->
  <script src="/js/hpHeader.js"></script>
  
  <script>
    // ▼ スクロールアニメ（復元）
    document.addEventListener("DOMContentLoaded", () => {
      const sections = document.querySelectorAll(
        '.game-overview, .character-intro, .news-section'
      );

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('slide-in');
          } else {
            entry.target.classList.remove('slide-in');
          }
        });
      }, { threshold: 0.2 });

      sections.forEach(section => observer.observe(section));
    });
  </script>


</body>
</html>
