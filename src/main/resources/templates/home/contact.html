<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ja"
	th:replace="layout/shop_base :: base_layout(~{::content}, 'お問い合せ', ~{::extraCss})">

<th:block th:fragment="extraCss">
	<link rel="stylesheet" th:href="@{/css/ec/contact.css}">
</th:block>

<th:block th:fragment="content">
	<section class="faq">
		<h2 class="section-title">Q&A</h2>

		<!-- ゲームサイト -->
		<div class="faq-item">
			<button class="faq-question">Q. ゲームの対応プラットフォームを教えてください。</button>
			<div class="faq-answer">
				<p>A. 本作は PC（Steam）、PlayStation、Nintendo Switch に対応しています。各プラットフォームで同様の内容をお楽しみいただけます。</p>
			</div>
		</div>

		<div class="faq-item">
			<button class="faq-question">Q. マルチプレイや協力プレイは可能ですか？</button>
			<div class="faq-answer">
				<p>A. はい、最大4人までの協力プレイが可能です。PC・PlayStation・Nintendo Switch間でのクロスプレイにも対応しています。</p>
			</div>
		</div>

		<div class="faq-item">
			<button class="faq-question">Q. 不具合を見つけた場合はどうすればいいですか？</button>
			<div class="faq-answer">
				<p>A. ゲーム内の「フィードバック」または本ページ下部の「お問い合わせフォーム」からご連絡ください。</p>
			</div>
		</div>
		
		<!-- ECサイト -->
		<div class="faq-item">
			<button class="faq-question">Q. 配送にはどのくらい時間がかかりますか？</button>
			<div class="faq-answer">
				<p>A. 通常、ご注文から2〜3営業日以内に発送いたします。土日祝を挟む場合は翌営業日の発送となります。</p>
			</div>
		</div>

		<div class="faq-item">
			<button class="faq-question">Q. 送料はいくらですか？</button>
			<div class="faq-answer">
				<p>A. 全国一律500円です。合計金額が5,000円以上の場合は送料無料になります。</p>
			</div>
		</div>

		<div class="faq-item">
			<button class="faq-question">Q. 海外への配送は可能ですか？</button>
			<div class="faq-answer">
				<p>A. 現在は日本国内のみの配送に対応しております。</p>
			</div>
		</div>
	</section>

	<!-- お問い合わせフォーム -->
	<section class="contact-section">
		<h2 class="section-title">お問い合わせフォーム</h2>

		<form th:action="@{/contact/submit}" th:object="${contactForm}" method="post" class="contact-form">
		    <div class="form-group">
		        <label for="name">お名前</label>
		        <input type="text" id="name" th:field="*{name}" required>
		        <!-- エラー表示 -->
		        <p class="error" th:if="${#fields.hasErrors('name')}"
		           th:errors="*{name}">お名前エラー</p>
		    </div>

		    <div class="form-group">
		        <label for="email">メールアドレス</label>
		        <input type="email" id="email" th:field="*{email}" required>
		        <!-- エラー表示 -->
		        <p class="error" th:if="${#fields.hasErrors('email')}"
		           th:errors="*{email}">メールアドレスエラー</p>
		    </div>

		    <div class="form-group">
		        <label for="subject">件名</label>
		        <input type="text" id="subject" th:field="*{subject}">
		        <!-- エラー表示 -->
		        <p class="error" th:if="${#fields.hasErrors('subject')}"
		           th:errors="*{subject}">件名エラー</p>
		    </div>

		    <div class="form-group">
		        <label for="message">お問い合わせ内容</label>
		        <textarea id="message" th:field="*{message}" required></textarea>
		        <!-- エラー表示 -->
		        <p class="error" th:if="${#fields.hasErrors('message')}"
		           th:errors="*{message}">お問い合わせ内容エラー</p>
		    </div>

		    <button type="submit" class="submit-btn">送信する</button>
		</form>

		<!-- 送信成功メッセージ -->
		<p th:if="${successMessage}" th:text="${successMessage}" class="success-message"></p>
	</section>

	<script>
		document.addEventListener("DOMContentLoaded", () => {
			document.querySelectorAll(".faq-question").forEach(q => {
				q.addEventListener("click", () => {
					q.classList.toggle("active");
					const answer = q.nextElementSibling;
					answer.style.maxHeight = q.classList.contains("active")
						? answer.scrollHeight + "px"
						: null;
				});
			});
		});
	</script>
</th:block>

</html>