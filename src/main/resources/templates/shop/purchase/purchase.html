<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ja">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" th:href="@{/css/ec/main.css}">
	<link rel="stylesheet" th:href="@{/css/ec/header.css}">
	<link rel="stylesheet" th:href="@{/css/ec/footer.css}">
	<title>購入画面 - FPS GEAR STORE</title>
	<style>
		table {
			border-collapse: collapse;
			width: 100%;
			margin-top: 20px;
		}

		th,
		td {
			padding: 12px 14px;
			border-bottom: 1px solid #ccc;
			text-align: center;
			vertical-align: middle;
		}

		th {
			background-color: #f5f5f5;
			color: black;
		}

		img {
			display: block;
			margin: 0 auto;
		}

		tbody tr {
			height: 120px;
		}

		.purchase-actions {
			margin-top: 30px;
			display: flex;
			justify-content: space-between;
			align-items: center;
			border-top: 1px solid #ccc;
			padding-top: 15px;
		}

		select,
		input[type="text"] {
			padding: 6px 10px;
			font-size: 1rem;
			border: 1px solid #aaa;
			border-radius: 4px;
		}

		.purchase-actions button {
			padding: 10px 20px;
			background-color: #ccc;
			border: none;
			cursor: pointer;
		}

		.purchase-actions button:hover {
			background-color: #bbb;
		}

		h2 {
			margin-top: 20px;
			text-align: center;
		}
	</style>
</head>

<body>
	<div th:replace="fragments/header :: header"></div>

	<main>
		<section>
			<h2>購入画面</h2>

			<!-- 商品一覧 -->
			<table>
				<thead>
					<tr>
						<th>商品画像</th>
						<th>商品名</th>
						<th>数量</th>
						<th>価格</th>
						<th>小計</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="cv : ${cartItems}">
						<td>
							<img th:src="${cv.item.imagePath != null ? cv.item.imagePath : '/images/default.png'}"
								onerror="this.onerror=null;this.src='/image/no_image.png';" alt="商品画像" width="80">
						</td>
						<td th:text="${cv.item.name}">商品名</td>
						<td th:text="${cv.cart.quantity}">1</td>
						<td th:text="${#numbers.formatInteger(cv.item.price, 1, 'COMMA')} + '円'">0円</td>
						<td th:text="${#numbers.formatInteger(cv.item.price * cv.cart.quantity, 1, 'COMMA')} + '円'">0円
						</td>
					</tr>
				</tbody>
			</table>

			<!-- 購入情報入力 -->
			<form th:action="@{/voidrshop/purchase/confirm}" method="post">
				<div class="purchase-actions">
					<a th:href="@{/voidrshop/cart}">カートに戻る</a>
					<div>
						<label for="paymentMethod"><strong>支払い方法：</strong></label>
						<select id="paymentMethod" name="paymentMethod" required>
							<option value="クレジットカード" selected>クレジットカード</option>
							<option value="銀行振込">銀行振込</option>
							<option value="コンビニ払い">コンビニ払い</option>
						</select>

						<br><br>
						<label for="address"><strong>配送先住所：</strong></label>
						<input type="text" id="address" name="address" placeholder="例：東京都渋谷区1-2-3" required
							style="width:300px; margin-left:10px;">

						<br><br>
						<strong>合計金額：
							¥<span th:text="${#numbers.formatInteger(totalPrice, 1, 'COMMA')}">0</span>
						</strong>

						<button type="submit" style="margin-left:20px;">購入内容確認画面へ</button>
					</div>
				</div>
			</form>
		</section>
	</main>

	<div th:replace="fragments/footer :: footer"></div>
</body>

</html>