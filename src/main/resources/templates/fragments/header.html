<!-- header.html -->
<div th:fragment="header">
	<div class="fixed-header">
		<!-- 白帯 -->
		<div class="top-bar">
			<span sec:authorize="isAuthenticated()">
				こんにちは、<span sec:authentication="principal.displayName"></span> さん
			</span>
			<a th:href="@{/login}" sec:authorize="!isAuthenticated()">ログイン</a>
			<span class="separator">｜</span>
			<a th:href="@{/contact}">お問い合わせ</a>
		</div>

		<!-- 黒帯 -->
		<header>
			<h1>
				<a th:href="@{/voidrshop}">
					<img th:src="@{/image/ui/header_logo.webp}" alt="Voidr Official Store">
				</a>
			</h1>

			<nav>
				<a th:href="@{/voidrshop}">トップ</a>
				<a th:href="@{/voidrshop/items}">ストア</a>
				<a th:href="@{/voidrshop/contact}">お問い合わせ</a>
				<!-- 購入履歴ボタン（ログインユーザーのみ表示） -->
				<a th:href="@{/mypage/orders}" sec:authorize="isAuthenticated()">購入履歴</a>
			</nav>

			<div class="header-right">
				<form class="search-box" th:action="@{/voidrshop/items/search}" method="get">
					<input type="text" name="keyword" placeholder="商品を検索" th:value="${keyword}">
					<button type="submit">検索</button>
				</form>

				<!-- カートリンク -->
				<a th:href="@{/voidrshop/cart}" class="cart-link">
					<img th:src="@{/image/ui/header_carticon.png}" alt="Cart Icon">
					<span>カート</span>
				</a>

				<!-- ログイン状態に応じて表示 -->
				<span sec:authorize="isAuthenticated()">
					<span sec:authentication="principal.displayName"></span>
				</span>
				<a sec:authorize="!isAuthenticated()" th:href="@{/login}">ログイン</a>
			</div>
		</header>
	</div>
</div>